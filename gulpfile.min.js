"use strict";var gulp=require("gulp"),sass=require("gulp-sass"),minify=require("gulp-minify"),rename=require("gulp-rename"),sassGlob=require("gulp-sass-glob"),iconfont=require("gulp-iconfont"),iconfontCss=require("gulp-iconfont-css"),runSequence=require("run-sequence"),browserSync=require("browser-sync").create(),argv=require("yargs").argv,theme=null,pathToAssets="./web/assets/";gulp.task("set:theme",function(){theme=void 0===argv.theme?"default":argv.theme,console.log(theme)}),gulp.task("normalize",function(){return gulp.src("./node_modules/normalize.css/normalize.css").pipe(rename({basename:"normalize",extname:".scss"})).pipe(gulp.dest("./styles/sass--"+theme+"/base/normalize"))}),gulp.task("grid",function(){return gulp.src("./styles/sass--grid/grid--"+theme+".scss").pipe(sassGlob()).pipe(sass({outputStyle:"compressed"}).on("error",sass.logError)).pipe(gulp.dest("./styles/sass--"+theme+"/components/grid")).pipe(rename({basename:"grid-"+theme,extname:".scss"})).pipe(gulp.dest("./styles/sass--"+theme+"/components"))}),gulp.task("sass",function(){return gulp.src("./styles/sass--"+theme+"/main.scss").pipe(sassGlob()).pipe(sass({outputStyle:"compressed"}).on("error",sass.logError)).pipe(gulp.dest(pathToAssets+theme+"/styles")).pipe(browserSync.stream())}),gulp.task("watch",function(){gulp.watch("styles/sass--"+theme+"/**/*.scss",["sass"])}),gulp.task("browserSync",["front"],function(){browserSync.init({proxy:"127.0.0.1:8000"}),gulp.watch("./styles/sass--"+theme+"/**/*.scss",["sass"]),gulp.watch("./web/home/*").on("change",browserSync.reload),gulp.watch("./web/docs/pages/*").on("change",browserSync.reload),gulp.watch("./web/docs/examples/*").on("change",browserSync.reload),gulp.watch("./web/docs/partials/**/*").on("change",browserSync.reload),gulp.watch("./web/docs/miscellaneous/*").on("change",browserSync.reload)}),gulp.task("vendors",["set:theme"],function(){var s="./node_modules/",e=pathToAssets+theme+"/";gulp.src(s+"jsonlylightbox/js/lightbox.min.js").pipe(gulp.dest(e+"scripts/vendors/jsonlylightbox/")),gulp.src(s+"jsonlylightbox/css/lightbox.scss").pipe(gulp.dest("./styles/sass--"+theme+"/vendors/jsonlylightbox/"))}),gulp.task("copy",["set:theme"],function(){var s=pathToAssets+theme+"/",e="./src/app/public/assets/"+theme+"/";gulp.src(s+"styles/*.css").pipe(gulp.dest(e+"styles/")),gulp.src(s+"images/**/*.{jpg,png,jpeg,svg,gif,ico}").pipe(gulp.dest(e+"images/")),gulp.src(s+"fonts/**/*.{ttf,woff,woff2,eot,svg,json}").pipe(gulp.dest(e+"fonts/")),gulp.src(s+"scripts/**/*.js").pipe(gulp.dest(e+"scripts/"))}),gulp.task("iconfont",["set:theme"],function(){var s=pathToAssets+theme+"/fonts/project-icons/";gulp.src([pathToAssets+theme+"/images/svg/*.svg"]).pipe(iconfontCss({fontName:"project-icons",path:"./styles/sass--"+theme+"/base/_icons-template.scss",targetPath:"../../../../../styles/sass--"+theme+"/base/icon.scss",cssClass:"icon",fontPath:s})).pipe(iconfont({fontName:"project-icons",formats:["ttf","eot","woff","woff2","svg"],normalize:!0})).pipe(gulp.dest(s))}),gulp.task("minify",["set:theme"],function(){var s=pathToAssets+theme+"/";gulp.src(s+"scripts/**/*.js").pipe(minify({ext:{src:".raw.js",min:".js"},exclude:["vendors"],ignoreFiles:["*.min.js","*.raw.js"]})).pipe(gulp.dest(s+"scripts"))}),gulp.task("grid-sequence",["set:theme","vendors","grid","normalize"]),gulp.task("sass-sequence",["set:theme","sass"]),gulp.task("build",function(){runSequence("grid-sequence","sass-sequence","minify","copy")}),gulp.task("base",["set:theme","vendors","grid","normalize","sass"]),gulp.task("front",["set:theme","sass","watch"]),gulp.task("browsersync",["browserSync","watch"]);